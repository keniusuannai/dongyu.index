<div class="wrapper clearfix">
    <a class="logo" href="/"><img src="/images/logo.png" alt="东娱传媒"></a>
    <div class="mod-menu">
        <span class="line"></span>
        <span class="line"></span>
        <span class="line"></span>
    </div>
    <ul class="nav-list clearfix j-nav-list">
        <li><a href="/">首页</a></li>
    </ul>
</div>

<script src="/lib/jquery.min.js"></script>
<script>
    $(".mod-menu").click(function () {
        $(this).toggleClass("is-active");
        $('.header .nav-list').slideToggle();
    });
    $(document).on('mouseenter', '.nav-list li', function () {
        $(this).find('.sub-list').stop().slideDown('fast');
    });
    $(document).on('mouseout', '.nav-list li', function () {
        $(this).find('.sub-list').stop().slideUp('fast');
    });
    $(document).on('mouseenter', '.sub-list', function () {
        $(this).stop().slideDown('fast');
    });
    $(document).on('mouseenter', '.sub-list li', function () {
        $(this).parent().stop().slideDown('fast');
    });
    $.getJSON('/get/article/top/', function (res) {
        //获取url id
        var strs = window.location.href.split('/');
        var temp = '', flag = false;
        res.article.map(function (v, i) {
            if (strs[strs.length - 1] == v._id) {
                temp += '<li class="cur"><a href="/article/title/' + v._id + '">' + v.title + '</a><ul class="sub-list clearfix">';
                flag = true;
            } else {
                temp += '<li><a href="/article/title/' + v._id + '">' + v.title + '</a><ul class="sub-list clearfix">';
            }
            v.sub_article.map(function (_v, _i) {
                temp += '<li><a href="/article/id/' + _v._id + '">' + _v.title + '</a></li>';
            });
            temp += '</ul></li>';
        });
        $('.j-nav-list').append(temp);

        if (!flag) {
            $('.j-nav-list li').eq(0).addClass('cur');
        }
    });
</script>